<template>
    <div class="header">
        <div class="logo">
            <img src="/images/logo.png" alt="">
        </div>
        <div class="description">
            <h2>Você está muito próximo de mudar a forma de <br>hospedar seu site</h2>
            <span>Escolha o seu plano</span>
        </div>
    </div>

    <div class="plans">
        <Carousel v-if="isMobileResolution">
            <slide v-for="plan in plans" :key="plan.id">
                <cardFlatComponent :plan="plan">
                    <template v-slot:flag>
                        <flagComponent v-if="plan.moreUsed === true" :customclass="'green'">MAIS USADO</flagComponent>
                    </template>
                    <buttonComponent :customclass="'red'"
                                    @click="choosenPlan(plan)">ESCOLHER ESSE PLANO</buttonComponent>
                </cardFlatComponent>
            </slide>

            <template #addons>
                <Navigation />
            </template>
        </Carousel>
    
        <div v-else class="content" v-for="plan in plans" :key="plan.id">
            <cardFlatComponent :plan="plan">
                <template v-slot:flag>
                    <flagComponent v-if="plan.moreUsed === true" :customclass="'green'">MAIS USADO</flagComponent>
                </template>
                <buttonComponent :customclass="'red'"
                                    @click="choosenPlan(plan)">ESCOLHER ESSE PLANO</buttonComponent>
            </cardFlatComponent>
        </div>
    </div>
</template>

<style scoped>
.plans{
    display: flex;
    flex-direction: row;
    gap: 30px;
}
.logo img{
    width: 210px;
}
.description h2{
    font-size: 32px;
    margin: 15px 0;
}
.description span{
    font-size: 21px;
    font-weight: 500;
}
.description{
    margin: 0 0 15px 0;
}
.header{
    margin: 0 0 20px 0;
}
.carousel__slide{
    align-items: normal;
}
@media screen and (max-width: 810px) {
    .description h2{
        font-size: 25px;
    }
    .description span{
        font-size: 16px;
    }
    .header{
        margin: 0 0 10px 0;
    }
}
</style>

<script>

import cardFlatComponent from '../components/cardFlatComponent.vue';
import buttonComponent from '../components/buttonComponent.vue';
import flagComponent from '../components/flagComponent.vue';
import { RouterLink } from 'vue-router';
import 'vue3-carousel/dist/carousel.css'
import { Carousel, Slide, Pagination, Navigation } from 'vue3-carousel'

export default{
    components: {
        cardFlatComponent,
        buttonComponent,
        RouterLink,
        flagComponent,
        Carousel, 
        Slide, 
        Pagination, 
        Navigation
    },
    data(){
        return{
            isMobileResolution: false,
            plans : [
                {
                    id: 1,
                    price: '',
                    target: 'Ideal para quem está começando.',
                    billingDate: '',
                    setupFee: '',
                    server: 'Estados Unidos',
                    details: [
                        'Servidores em nossos data center americanos',
                        'ASP ASPNET 2.0/3.0/3.5/ e 4.0/4.5/4.5.1/4.5.2 (medium trust) ou PHP 5.3, 5.4, 5.5, 5.6 e 7.0',
                        '1 usuário de FTP upload ou download',
                        '1 contas de e-mails profissionais',
                        '1 subdomínio gratuito;'
                ],
                    support: 'all',
                    availableApps: [
                        'Wordpress',
                        'Drupal',
                        'entre outros'
                    ],
                    moreUsed:false,
                    migration: false,
                    moreFeatures: [
                        'Webmail RoundCube',
                        'AntiSpam',
                        'Painel de gerenciamento de DNS',
                        'Painel de controle web',
                        'Configurações de PHP personalizáveis',
                        'Certificado SSL Grátis',
                        'Tranferência ilimitada'
                    ]
                },
                {
                    id: 2,
                    price: '499',
                    target: 'Ideal para site com mais de 30k de visitas.',
                    billingDate: 'mensalmente',
                    server: 'Brasil',
                    details: [
                        'Servidores em nossos data center americanos',
                        'ASP ASPNET 2.0/3.0/3.5/ e 4.0/4.5/4.5.1/4.5.2 (medium trust) ou PHP 5.3, 5.4, 5.5, 5.6 e 7.0',
                        '1 usuário de FTP upload ou download',
                        '1 contas de e-mails profissionais',
                        '1 subdomínio gratuito'
                    ],
                    availableApps: [
                        'Wordpress',
                        'Drupal',
                        'entre outros'
                    ],
                    moreUsed:true,
                    migration: true,
                    moreFeatures: [
                        'Webmail RoundCube',
                        'AntiSpam',
                        'Painel de gerenciamento de DNS',
                        'Painel de controle web',
                        'Configurações de PHP personalizáveis',
                        'Certificado SSL Grátis',
                        'Tranferência ilimitada'
                    ]
                },
                {
                    id: 3,
                    price: '999',
                    target: 'Ideal para site com mais de 60k de visitas.',
                    billingDate: 'mensalmente',
                    server: 'Brasil',
                    details: {
                        field1: 'Servidores em nossos data center de São Paulo',
                        field2: 'ASP ASPNET 2.0/3.0/3.5/ e 4.0/4.5/4.5.1/4.5.2 (medium trust) ou PHP 5.3, 5.4, 5.5, 5.6 e 7.0',
                        field3: '10 usuários de FTP para upload ou download',
                        field4: '30 contas de e-mails profissionais',
                        field5: '10 subdomínios gratuito'
                    },
                    support: 'all',
                    availableApps: [
                        'Wordpress',
                        'Drupal',
                        'entre outros'
                    ],
                    moreUsed:false,
                    migration: true,
                    moreFeatures: [
                        'Webmail RoundCube',
                        'AntiSpam',
                        'Painel de gerenciamento de DNS',
                        'Painel de controle web',
                        'Configurações de PHP personalizáveis',
                        'Certificado SSL Grátis',
                        'Tranferência ilimitada'
                    ]
                },

            ]
        }
    },
    beforeDestroy() {
        window.removeEventListener('resize', this.checkResolution); // Remover o ouvinte de eventos de redimensionamento da janela ao destruir o componente
    },
    methods:{
        choosenPlan(plan) {
            sessionStorage.setItem('plan', JSON.stringify(plan))

            this.$router.push({ path: '/register' });
        },
        checkResolution() {
            this.isMobileResolution = window.innerWidth < 1100; // Definir a variável isMobileResolution como true se a largura da janela for menor do que 768 pixels
        },
    },
    mounted() {
        this.checkResolution(); // Verificar a resolução inicialmente no momento em que o componente é montado
        window.addEventListener('resize', this.checkResolution); // Ouvir eventos de redimensionamento da janela
    },
}
</script>